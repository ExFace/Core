-- UP
DROP TABLE IF EXISTS `exf_uxon_preset`;
CREATE TABLE `exf_uxon_preset` (
  `oid` binary(16) NOT NULL,
  `app_oid` binary(16) DEFAULT NULL,
  `name` varchar(250) NOT NULL,
  `description` longtext,
  `uxon` longtext NOT NULL,
  `wrap_path_in_preset` varchar(255) DEFAULT NULL,
  `prototype` varchar(200) DEFAULT NULL,
  `uxon_schema` varchar(20) DEFAULT NULL,
  `created_on` datetime NOT NULL,
  `modified_on` datetime NOT NULL,
  `created_by_user_oid` binary(16) DEFAULT NULL,
  `modified_by_user_oid` binary(16) DEFAULT NULL,
  PRIMARY KEY (`oid`),
  KEY `prototype` (`prototype`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `exf_object` (`oid`, `app_oid`, `object_name`, `object_alias`, `data_address`, `data_address_properties`, `readable_flag`, `writable_flag`, `data_source_oid`, `inherit_data_source_base_object`, `parent_object_oid`, `short_description`, `docs_path`, `default_editor_uxon`, `comments`, `created_on`, `modified_on`, `created_by_user_oid`, `modified_by_user_oid`) VALUES
(0x11e9a23da60d78a6949f106530e7aff7, 0x31000000000000000000000000000000, 'UXON Preset', 'UXON_PRESET', 'exf_uxon_preset', NULL, 1, 1, 0x32000000000000000000000000000000, 1, NULL, '', '', '{\"widget_type\":\"Form\",\"widgets\":[{\"attribute_alias\":\"NAME\"},{\"attribute_alias\":\"APP\"},{\"attribute_alias\":\"PROTOTYPE\",\"id\":\"input_uxon_prototype\"},{\"widget_type\":\"WidgetGroup\",\"caption\":\"Use as wrapper\",\"widgets\":[{\"attribute_alias\":\"WRAP_FLAG\",\"id\":\"wrap_flag\",\"disabled\":false,\"widget_type\":\"InputCheckBox\",\"display_only\":true},{\"attribute_alias\":\"WRAP_PATH\",\"widget_type\":\"Input\",\"disable_condition\":{\"widget_link\":\"wrap_flag\",\"comparator\":\"==\",\"value\":0}}]},{\"attribute_alias\":\"DESCRIPTION\",\"width\":1},{\"attribute_alias\":\"UXON\",\"widget_type\":\"InputHidden\"},{\"attribute_alias\":\"UXON\",\"width\":2,\"height\":20,\"hide_caption\":true,\"widget_type\":\"InputUxon\",\"root_prototype\":\"=input_uxon_prototype\"}]}', '', '2019-07-09 11:35:26', '2019-09-02 06:51:22', 0x11e9876d60774992bb32106530e7aff7, 0x31000000000000000000000000000000);

INSERT INTO `exf_attribute` (`oid`, `attribute_alias`, `attribute_name`, `object_oid`, `data`, `data_properties`, `attribute_formatter`, `data_type_oid`, `default_display_order`, `default_sorter_order`, `default_sorter_dir`, `object_label_flag`, `object_uid_flag`, `attribute_readable_flag`, `attribute_writable_flag`, `attribute_hidden_flag`, `attribute_editable_flag`, `attribute_required_flag`, `attribute_system_flag`, `attribute_sortable_flag`, `attribute_filterable_flag`, `attribute_aggregatable_flag`, `default_value`, `fixed_value`, `related_object_oid`, `related_object_special_key_attribute_oid`, `relation_cardinality`, `copy_with_related_object`, `delete_with_related_object`, `attribute_short_description`, `default_editor_uxon`, `default_display_uxon`, `custom_data_type_uxon`, `comments`, `created_on`, `modified_on`, `created_by_user_oid`, `modified_by_user_oid`, `default_aggregate_function`, `value_list_delimiter`) VALUES
(0x11e9a23dbe82ded6949f106530e7aff7, 'APP', 'App', 0x11e9a23da60d78a6949f106530e7aff7, 'app_oid', '{\"SQL_DATA_TYPE\":\"binary\"}', '', 0x11e8091315d97da6b5b5e4b318306b9a, NULL, NULL, '', 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, '', '', 0x35370000000000000000000000000000, NULL, '', 0, 1, '', NULL, NULL, NULL, '', '2019-07-09 11:36:07', '2019-07-09 11:40:13', 0x11e9876d60774992bb32106530e7aff7, 0x11e9876d60774992bb32106530e7aff7, '', ','),
(0x11e9a23dbe8308fc949f106530e7aff7, 'NAME', 'Name', 0x11e9a23da60d78a6949f106530e7aff7, 'name', NULL, NULL, 0x30000000000000000000000000000000, NULL, NULL, NULL, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, '', '', NULL, NULL, '', NULL, NULL, '', NULL, NULL, NULL, NULL, '2019-07-09 11:36:07', '2019-07-09 11:38:50', 0x11e9876d60774992bb32106530e7aff7, 0x11e9876d60774992bb32106530e7aff7, NULL, ','),
(0x11e9a23dbe83c09f949f106530e7aff7, 'DESCRIPTION', 'Description', 0x11e9a23da60d78a6949f106530e7aff7, 'description', NULL, NULL, 0x31310000000000000000000000000000, NULL, NULL, NULL, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, '', '', NULL, NULL, '', NULL, NULL, '', NULL, NULL, NULL, NULL, '2019-07-09 11:36:07', '2019-07-09 11:38:50', 0x11e9876d60774992bb32106530e7aff7, 0x11e9876d60774992bb32106530e7aff7, NULL, ','),
(0x11e9a23dbe83e004949f106530e7aff7, 'PROTOTYPE', 'Prototype', 0x11e9a23da60d78a6949f106530e7aff7, 'prototype', NULL, '', 0x30000000000000000000000000000000, NULL, NULL, '', 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, '', '', NULL, NULL, '', 0, 0, 'PHP class, filename (relative to vendor folder) or namespaced alias of the UXON prototype, for which this preset is to be used', NULL, NULL, NULL, '', '2019-07-09 11:36:07', '2019-09-01 18:49:29', 0x11e9876d60774992bb32106530e7aff7, 0x31000000000000000000000000000000, '', ','),
(0x11e9a23fd14a4d95949f106530e7aff7, 'UXON', 'UXON', 0x11e9a23da60d78a6949f106530e7aff7, 'uxon', NULL, '', 0x11e905162eeb6334b04c0205857feb80, NULL, NULL, '', 0, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, '', '', NULL, NULL, '', 0, 0, '', NULL, NULL, NULL, '', '2019-07-09 11:50:57', '2019-07-09 11:51:59', 0x11e9876d60774992bb32106530e7aff7, 0x11e9876d60774992bb32106530e7aff7, '', ','),
(0x11e9ac6c435c15538d53106530e7aff7, 'WRAP_PATH', 'Place wrapped UXON in', 0x11e9a23da60d78a6949f106530e7aff7, 'wrap_path_in_preset', NULL, '', 0x30000000000000000000000000000000, NULL, NULL, '', 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, '', '', NULL, NULL, '', 0, 0, 'If this preset will be used to wrap some UXON code, that code will be placed under this JSONPath. The node in the preset, where the JSONPath points to will be replaced by whatever is being wrapped.', NULL, NULL, NULL, '', '2019-07-22 10:33:53', '2019-07-22 11:12:21', 0x11e9876d60774992bb32106530e7aff7, 0x11e9876d60774992bb32106530e7aff7, '', ','),
(0x11e9ac6fd1b15c528d53106530e7aff7, 'WRAP_FLAG', 'Usable as wrapper', 0x11e9a23da60d78a6949f106530e7aff7, 'IF([#WRAP_PATH#] <> \"\", 1, 0)', NULL, '', 0x37000000000000000000000000000000, NULL, NULL, '', 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, '', '', NULL, NULL, '', 0, 0, 'This preset can be used to wrap other UXON objects', NULL, NULL, NULL, '', '2019-07-22 10:59:20', '2019-09-01 18:49:55', 0x11e9876d60774992bb32106530e7aff7, 0x31000000000000000000000000000000, '', ','),
(0x11e9cce9504bef56ad7fe4b318306b9a, 'UXON_SCHEMA', 'UXON schema', 0x11e9a23da60d78a6949f106530e7aff7, 'uxon_schema', NULL, '', 0x30000000000000000000000000000000, NULL, NULL, '', 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, '', '', NULL, NULL, '', 0, 0, '', NULL, NULL, NULL, '', '2019-09-01 18:50:30', '2019-09-01 18:54:32', 0x31000000000000000000000000000000, 0x31000000000000000000000000000000, '', ',');

-- DOWN
DROP TABLE `exf_uxon_preset`;